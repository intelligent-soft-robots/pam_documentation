<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview and software installation &mdash; PAM Documentation 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial 0: How to run tutorial demos" href="B1_tutorial0.html" />
    <link rel="prev" title="PAM Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PAM Documentation
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Overview and software installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#software-installation">Software installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-installation-script">Using the installation script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#via-colcon-workspace">Via colcon workspace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-your-ssh-key-to-github">Adding your SSH key to github</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies-and-configuration-folder">Dependencies and configuration folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cloning-the-repositories">Cloning the repositories</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compilation">Compilation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#activating-the-workspace">Activating the workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-things-are-ok">Checking things are ok</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="B1_tutorial0.html">Tutorial 0: How to run tutorial demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="B2_tutorial1.html">Tutorial 1: Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="B3_tutorial2.html">Tutorial 2: Reading robot data</a></li>
<li class="toctree-l1"><a class="reference internal" href="B4_tutorial3.html">Tutorial 3: Iteration commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="B5_tutorial4.html">Tutorial 4: Joint control, table, balls, etc.</a></li>
<li class="toctree-l1"><a class="reference internal" href="B6_tutorial5.html">Tutorial 5: Saving data to files</a></li>
<li class="toctree-l1"><a class="reference internal" href="B7_tutorial6.html">Tutorial 6: Bursting mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="C1_handle.html">More info: MuJoCo handles and contacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="C2_real_robot.html">More info: Using the real robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="C3_executables.html">More info: List of executables</a></li>
<li class="toctree-l1"><a class="reference internal" href="C4_mirroring.html">More info: Mirroring real robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="C5_visual_ball_tracking.html">More info: Visual ball tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="C6_saving_ball_and_racket_contacts.html">More info: Saving ball trajectories</a></li>
<li class="toctree-l1"><a class="reference internal" href="C7_ball_launcher.html">More info: Ball launcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="E1_tools.html">Developer’s guide 1: Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="E2_guidelines.html">Developer’s guide 2: Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="E3_packages_overview.html">Developer’s guide 3: Packages overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="E4_advanced_overview.html">Developer’s guide 4: Advanced overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="E5_documentation.html">Developer’s guide: Updating the documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PAM Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Overview and software installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/A1_overview_and_installation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="overview-and-software-installation">
<h1>Overview and software installation<a class="headerlink" href="#overview-and-software-installation" title="Permalink to this headline"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p><img alt="pam robot" src="https://ei.is.tuebingen.mpg.de/uploads/publication/image/18667/2PAMcompressed.jpg" /></p>
<p>PAM robot (Pneumatic Artificial Muscle robot) is a four degrees of freedom robot. Most of the days, we have it learning how to play tennis table. But it could be used for other purposes, e.g. exploring the control of artificial muscles.</p>
<p>It is controlled via the value of pressures of its 8 artificial muscles. Each joint is connected to 2 artificial muscles, called agonist and antagonist. If the pressure of the agonist is higher than the pressure of the antagonist (i.e. the agonist is more contracted than the antagonist), the joint moves left. A control command consists of setting the pressure(s) of one (or more) muscle(s).</p>
<p>We developed some software allowing for the control of the robot (or a <a class="reference external" href="http://www.mujoco.org/">MuJoCo</a> simulated version of it). The software allows to send commands related to the desired pressures to the robot, as well as accessing the current and past states of the robot. The software is written in C++ and has Python wrappers (and has been tested only on Ubuntu).</p>
<p>Once the software installed, the typical workflow starts with calling in a terminal:</p>
<p>For starting the real robot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>o80_pam
</pre></div>
</div>
<p>For starting a simulated robot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pam_mujoco mujoco_id
<span class="c1"># arbritrary_id is an arbitrary string used</span>
<span class="c1"># to distinguish between all the simulated robots</span>
<span class="c1"># that may run in parallel</span>
</pre></div>
</div>
<p>The command above spawns a “backend” process which connects to the robot. This process reads continuously (i.e. at a frequency of 200Hz or more) the state of the robot and writes it in a shared memory. Also, it reads the shared memory for commands to apply to the robot.</p>
<p>User may then use a Python (or a C++) API for interacting with the shared memory, i.e. reading the state of the robot (written by the backend) or writing commands to it (which will then be read by the backend and applied to the robot).</p>
<p>There are quite a few types of commands that can be written in the shared memory. The system is based on o80, and it is advised to read o80’s <a class="reference external" href="http://people.tuebingen.mpg.de/mpi-is-software/o80/docs/o80/index.html" title="(in o80)"><span class="xref std std-doc">documentation</span></a> before going further.</p>
</section>
<section id="software-installation">
<h2>Software installation<a class="headerlink" href="#software-installation" title="Permalink to this headline"></a></h2>
<p>Installing the software will results in:</p>
<ul class="simple">
<li><p>having some executables installed on your system (e.g. ‘o80_pam’ or ‘pam_mujoco’ already mentioned above)</p></li>
<li><p>having some Python packages installed</p></li>
<li><p>useful for advanced users: some C++ libraries installed</p></li>
</ul>
<p>The executables will be used to start the backend connecting to the robot, while the Python packages can be used for developers to create control scripts that send commands to the backend (via the shared memory) and/or read states of the robot (also via the shared memory).</p>
<section id="using-the-installation-script">
<h3>Using the installation script<a class="headerlink" href="#using-the-installation-script" title="Permalink to this headline"></a></h3>
<p>To compile from source and install for your user, execute this <a class="reference external" href="http://people.tuebingen.mpg.de/mpi-is-software/pam/resources/pam_install">file</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">people</span><span class="o">.</span><span class="n">tuebingen</span><span class="o">.</span><span class="n">mpg</span><span class="o">.</span><span class="n">de</span><span class="o">/</span><span class="n">mpi</span><span class="o">-</span><span class="ow">is</span><span class="o">-</span><span class="n">software</span><span class="o">/</span><span class="n">pam</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">pam_install</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">./</span><span class="n">pam_install</span>
<span class="o">./</span><span class="n">pam_install</span>
</pre></div>
</div>
<p>This will:</p>
<ul class="simple">
<li><p>install some aptitude dependencies (you may be prompted to enter a sudo password)</p></li>
<li><p>install some pip3 dependencies for the <em>currently active python3</em>. You are encouraged to use a virtual environment.</p></li>
<li><p>install the <a class="reference external" href="https://mujoco.org/">MuJoCo physics engine</a> in ~/.mpi-is/mujoco</p></li>
<li><p>install configuration files in ~/.mpi-is/pam</p></li>
<li><p>install compiled libraries and executables in ~/.mpi-is/pam/install</p></li>
<li><p>add lines in the ~/.bashrc files to update the <span class="math notranslate nohighlight">\(PATH and \)</span>LD_LIBRARY_PATH to include ~/.mpi-is/pam/install</p></li>
</ul>
</section>
<section id="via-colcon-workspace">
<span id="install-via-colcon"></span><h3>Via colcon workspace<a class="headerlink" href="#via-colcon-workspace" title="Permalink to this headline"></a></h3>
<p>This is the recommended way for developers of the PAM software (as opposed to the users of it).</p>
<p><a class="reference external" href="https://colcon.readthedocs.io/en/released/">Colcon</a> is the built system of <a class="reference external" href="https://docs.ros.org/en/foxy/index.html">ROS2</a>.
The instructions below will result in the setup of a colcon workspace. Possibly, if you would like to use o80 in a ROS2 project, you may copy the cloned packages to an existing workspace.</p>
<section id="adding-your-ssh-key-to-github">
<h4>Adding your SSH key to github<a class="headerlink" href="#adding-your-ssh-key-to-github" title="Permalink to this headline"></a></h4>
<p>See: <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">github documentation</a>.</p>
<p>All the following instructions assume your SSH key has been activated, i.e.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace id_rsa by your key file name</span>
ssh-add ~/.ssh/id_rsa
</pre></div>
</div>
<ul class="simple">
<li><p>You must first register your SSH key to Github. See instructions <a class="reference external" href="https://docs.github.com/en/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">here</a></p></li>
<li><p>treep is likely to be already installed on your machine. If not:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install treep
</pre></div>
</div>
</section>
<section id="dependencies-and-configuration-folder">
<h4>Dependencies and configuration folder<a class="headerlink" href="#dependencies-and-configuration-folder" title="Permalink to this headline"></a></h4>
<p>in a terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir /tmp/pam <span class="o">&amp;&amp;</span> <span class="nb">cd</span> /tmp/pam
wget http://people.tuebingen.mpg.de/mpi-is-software/pam/resources/apt-dependencies
wget http://people.tuebingen.mpg.de/mpi-is-software/pam/resources/pip3-dependencies
chmod +x ./apt-dependencies
chmod +x ./pip3-dependencies
sudo ./apt-dependencies
./pip3-dependencies
</pre></div>
</div>
</section>
<section id="cloning-the-repositories">
<h4>Cloning the repositories<a class="headerlink" href="#cloning-the-repositories" title="Permalink to this headline"></a></h4>
<p>Creating a folder and cloning the treep configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir Software <span class="c1"># you may use another folder name</span>
<span class="nb">cd</span> Software
git clone git@github.com:intelligent-soft-robots/treep_isr.git
</pre></div>
</div>
<p>Cloning all the required repositories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>treep --clone PAM_MUJOCO
</pre></div>
</div>
</section>
<section id="compilation">
<h4>Compilation<a class="headerlink" href="#compilation" title="Permalink to this headline"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /path/to/Software
<span class="nb">cd</span> workspace
colcon build --cmake-args -DCMAKE_BUILD_TYPE<span class="o">=</span>Release -DPYBIND11_TEST<span class="o">=</span>OFF --no-warn-unused-cli
</pre></div>
</div>
<p>This will result in a “install” folder containing the compiled binaries</p>
</section>
</section>
<section id="activating-the-workspace">
<h3>Activating the workspace<a class="headerlink" href="#activating-the-workspace" title="Permalink to this headline"></a></h3>
<p>In each new terminal, the workspace needs to be sourced:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /path/to/Software/install/setup.bash
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Possibly, you may want to add the line above to the ~/.bashrc file (so that each new terminal source the workspace automatically).</p>
</div>
</section>
<section id="checking-things-are-ok">
<h3>Checking things are ok<a class="headerlink" href="#checking-things-are-ok" title="Permalink to this headline"></a></h3>
<p>In a python3 terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">o80</span>
<span class="kn">import</span> <span class="nn">o80_pam</span>
<span class="kn">import</span> <span class="nn">pam_mujoco</span>
<span class="kn">import</span> <span class="nn">context</span>
</pre></div>
</div>
<p>You may also try in a terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pam_mujoco <span class="nb">test</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="PAM Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="B1_tutorial0.html" class="btn btn-neutral float-right" title="Tutorial 0: How to run tutorial demos" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Empirical Inference, Max Planck Institute for Intelligent Systems.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>